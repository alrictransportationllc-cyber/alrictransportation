<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track Shipment - Alric Transportation | Real-Time Transportation Tracking</title>
    <meta name="description" content="Track your medical transportation, medication delivery, or ride in real-time with Alric Transportation's live tracking system.">
    <meta name="keywords" content="track medical transport, medication delivery tracking, real-time transport tracking, alric transportation tracking">
    <meta name="author" content="Alric Transportation">
    <link rel="canonical" href="https://alrictransportation.com/track">
    <meta property="og:title" content="Track Shipment - Alric Transportation">
    <meta property="og:description" content="Real-time tracking for medical transportation and delivery services">
    <meta property="og:image" content="assets/img/alrictlogo.png">
    <link rel="icon" type="image/png" href="assets/img/alrictlogo.png">
    <!-- Unified CSS file that includes all styles and animations -->
    <link rel="stylesheet" href="css/unified-styles.css">
</head>
<body>
   <!-- Header - Use this exact structure in ALL HTML files -->
<header>
    <nav>
        <div class="logo">
            <img src="assets/img/alrictlogo.png" alt="Alric Transportation Logo">
            <h1>Alric Transportation</h1>
        </div>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="track.html">Track</a></li>
        </ul>
        <!-- MOBILE MENU TOGGLE - ADD THIS TO ALL PAGES -->
        <button class="mobile-menu-toggle" aria-label="Toggle mobile menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </nav>
</header>

    <!-- Hero Section with pulse rings animation -->
    <section class="hero hero-pulse-rings">
        <div class="hero-content">
            <h1>üîç Track Your Service</h1>
            <p>Real-time tracking for your transportation and delivery services</p>
        </div>
    </section>

    <!-- Tracking Section -->
    <section class="tracking-section">
        <div class="container">
            <div class="tracking-form fade-in">
                <h2>Enter Your Tracking Information</h2>
                <p>Enter your tracking ID, booking reference, or phone number to see real-time updates on your service</p>
                
                <div class="tracking-input-group">
                    <input type="text" class="tracking-input" id="trackingInput" placeholder="Enter tracking ID or phone number">
                    <button class="track-btn" onclick="trackService()">üîç Track</button>
                </div>
                
                <div class="tracking-examples">
                    <div class="example-card">
                        <h4>Tracking ID Format</h4>
                        <p>AT-2025-001234</p>
                    </div>
                    <div class="example-card">
                        <h4>Booking Reference</h4>
                        <p>BK-MD-567890</p>
                    </div>
                    <div class="example-card">
                        <h4>Phone Number</h4>
                        <p>(555) 123-4567</p>
                    </div>
                </div>
                
                <div class="error-message" id="errorMessage">
                    Tracking ID not found. Please check your information and try again.
                </div>
            </div>

            <!-- Tracking Results (Initially Hidden) -->
            <div class="tracking-results" id="trackingResults">
                <div class="tracking-header">
                    <h3>Medical Transportation Service</h3>
                    <div class="tracking-id">Tracking ID: <span id="displayTrackingId">AT-2025-001234</span></div>
                    <div class="status-indicator status-pending" id="statusIndicator">Application Under Review</div>
                    <div class="last-updated" id="lastUpdated" style="font-size: 0.9em; color: #666; margin-top: 8px;">
                        Last updated: <span id="lastUpdatedTime">--</span>
                    </div>
                </div>

                <!-- Driver Information -->
                <div class="driver-info fade-in">
                    <div class="driver-avatar">üë®‚Äçüöó</div>
                    <div class="driver-details">
                        <h4>Assigning driver...</h4>
                        <p>Please wait while we find the best driver for your needs</p>
                        <p>Vehicle: Will be updated once driver is assigned</p>
                        <p>License Plate: --</p>
                    </div>
                    <div class="contact-driver">
                        <button class="contact-btn" disabled>üìû Call Driver</button>
                        <button class="contact-btn" disabled>üí¨ Text Driver</button>
                    </div>
                </div>

                <!-- Real-Time Notifications -->
                <div class="live-notifications" id="liveNotifications" style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 20px 0; border-radius: 4px; display: none;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div class="pulse-dot" style="width: 12px; height: 12px; background: #2196f3; border-radius: 50%; animation: pulse 2s infinite;"></div>
                        <span id="notificationText">Receiving live updates...</span>
                    </div>
                </div>

                <!-- Live Map -->
                <div class="map-section">
                    <h3 style="color: var(--secondary-color); margin-bottom: 1rem; display: flex; align-items: center; gap: 10px;">
                        <span>Live Location</span>
                        <div class="live-indicator" style="width: 10px; height: 10px; background: #4caf50; border-radius: 50%; animation: pulse 2s infinite;"></div>
                    </h3>
                    <div class="map-container">
                        <div class="map-placeholder" style="position: relative;">
                            üó∫Ô∏è Live Map View
                            <div class="vehicle-icon" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 24px; animation: bounce 2s infinite;">üöê</div>
                            <div class="route-line" style="position: absolute; top: 60%; left: 20%; width: 60%; height: 2px; background: linear-gradient(to right, #4caf50, #2196f3); animation: dash 3s linear infinite;"></div>
                        </div>
                        <div class="location-details" style="margin-top: 15px; display: grid; gap: 10px;">
                            <p style="color: var(--text-light); margin: 0;">
                                <strong>Current Location:</strong> <span id="currentLocation">Waiting for driver assignment...</span>
                            </p>
                            <p style="color: var(--text-light); margin: 0;">
                                <strong>ETA:</strong> <span id="currentETA">Calculating...</span>
                            </p>
                            <p style="color: var(--text-light); margin: 0;">
                                <strong>Distance:</strong> <span id="currentDistance">--</span>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Timeline with Real-Time Updates -->
                <div class="tracking-timeline">
                    <div class="timeline-header" style="text-align: center; margin-bottom: 20px;">
                        <h3 style="color: var(--secondary-color);">Service Timeline</h3>
                        <p style="color: #666; font-size: 0.9em;">Track your service from booking to completion</p>
                    </div>

                    <div class="timeline-item completed">
                        <div class="timeline-content">
                            <h4>Service Booked ‚úÖ</h4>
                            <p>Your medical transportation has been scheduled and confirmed</p>
                            <div class="timeline-time">Today, 8:15 AM</div>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h4>Driver Assignment üë®‚Äçüöó</h4>
                            <p>Finding and assigning the best available driver for your needs</p>
                            <div class="timeline-time">Pending...</div>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h4>Vehicle Dispatched üöê</h4>
                            <p>Driver has been notified and is preparing for dispatch</p>
                            <div class="timeline-time">Pending driver assignment</div>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h4>En Route to Pickup üõ£Ô∏è</h4>
                            <p>Driver is currently en route to your pickup location</p>
                            <div class="timeline-time">Will update when dispatched</div>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h4>Arrived at Pickup üìç</h4>
                            <p>Driver has arrived at your pickup location and is ready</p>
                            <div class="timeline-time">Will update when en route</div>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h4>En Route to Destination üè•</h4>
                            <p>Safe transportation to your medical appointment</p>
                            <div class="timeline-time">Will update after pickup</div>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h4>Service Completed üéØ</h4>
                            <p>Safe arrival at your destination - service complete</p>
                            <div class="timeline-time">Will update when complete</div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Quick Actions -->
                <div class="quick-actions" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 30px;">
                    <a href="tel:+15551234567" class="action-btn" style="display: flex; align-items: center; gap: 10px; padding: 15px; text-decoration: none; background: var(--primary-color); color: white; border-radius: 8px; transition: all 0.3s;">
                        <span class="action-icon">üìû</span>
                        <div>
                            <div style="font-weight: bold;">Emergency Contact</div>
                            <div style="font-size: 0.8em; opacity: 0.9;">24/7 Dispatch</div>
                        </div>
                    </a>
                    <a href="contact.html" class="action-btn" style="display: flex; align-items: center; gap: 10px; padding: 15px; text-decoration: none; background: var(--secondary-color); color: white; border-radius: 8px; transition: all 0.3s;">
                        <span class="action-icon">üí¨</span>
                        <div>
                            <div style="font-weight: bold;">Send Message</div>
                            <div style="font-size: 0.8em; opacity: 0.9;">Contact Support</div>
                        </div>
                    </a>
                    <a href="services.html" class="action-btn" style="display: flex; align-items: center; gap: 10px; padding: 15px; text-decoration: none; background: #4caf50; color: white; border-radius: 8px; transition: all 0.3s;">
                        <span class="action-icon">üìÖ</span>
                        <div>
                            <div style="font-weight: bold;">Return Trip</div>
                            <div style="font-size: 0.8em; opacity: 0.9;">Book Now</div>
                        </div>
                    </a>
                    <a href="#" onclick="shareTracking()" class="action-btn" style="display: flex; align-items: center; gap: 10px; padding: 15px; text-decoration: none; background: #ff9800; color: white; border-radius: 8px; transition: all 0.3s;">
                        <span class="action-icon">üì§</span>
                        <div>
                            <div style="font-weight: bold;">Share Tracking</div>
                            <div style="font-size: 0.8em; opacity: 0.9;">Send to Family</div>
                        </div>
                    </a>
                </div>

                <!-- Connection Status -->
                <div class="connection-status" id="connectionStatus" style="text-align: center; margin-top: 20px; padding: 10px; border-radius: 4px; font-size: 0.9em;">
                    <span id="connectionText">üîó Connected to real-time updates</span>
                </div>
            </div>        <div class="timeline-content">
                            <h4>En Route to Destination</h4>
                            <p>Transportation to your medical appointment</p>
                            <div class="timeline-time">Estimated: Today, 9:40 AM</div>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h4>Service Completed</h4>
                            <p>Safe arrival at your destination</p>
                            <div class="timeline-time">Estimated: Today, 10:00 AM</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <a href="tel:+15551234567" class="action-btn">
                        <span class="action-icon">üìû</span>
                        Call Dispatch
                    </a>
                    <a href="contact.html" class="action-btn">
                        <span class="action-icon">üí¨</span>
                        Send Message
                    </a>
                    <a href="services.html" class="action-btn">
                        <span class="action-icon">üìÖ</span>
                        Book Return Trip
                    </a>
                    <a href="contact.html" class="action-btn">
                        <span class="action-icon">‚ùì</span>
                        Get Help
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Alric Transportation</h3>
                <p>Professional medical transportation services with compassionate care and reliability you can trust.</p>
            </div>
            
            <div class="footer-section">
                <h3>Quick Links</h3>
                <p><a href="services.html">Services</a></p>
                <p><a href="about.html">About Us</a></p>
                <p><a href="contact.html">Contact</a></p>
                <p><a href="faq.html">FAQ</a></p>
            </div>
            
            <div class="footer-section">
                <h3>Services</h3>
                <p><a href="services.html#medical">Medical Transportation</a></p>
                <p><a href="services.html#wheelchair">Wheelchair/STS</a></p>
                <p><a href="services.html#ondemand">On-Demand Rides</a></p>
                <p><a href="services.html#medication">Medication Delivery</a></p>
            </div>
            
            <div class="footer-section">
                <h3>Contact Info</h3>
                <p>üìû (555) 123-4567</p>
                <p>üìß info@alrictransportation.com</p>
                <p>üìç 123 Medical Center Dr</p>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2025 Alric Transportation. All rights reserved. | <a href="legal.html">Privacy Policy</a> | <a href="legal.html">Terms of Service</a></p>
        </div>
    </footer>

    <!-- Firebase CDN Scripts - MUST load BEFORE your JavaScript -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>
    
    <!-- Your unified JavaScript file - load AFTER Firebase -->
    <script src="js/unified-scripts.js"></script>

    <!-- Admin Panel for Testing (Remove in Production) -->
    <div id="adminPanel" style="position: fixed; bottom: 20px; right: 20px; background: rgba(0,0,0,0.8); color: white; padding: 15px; border-radius: 8px; font-size: 12px; max-width: 300px; display: none;">
        <h4 style="margin: 0 0 10px 0; color: #fff;">üîß Admin Panel (Testing)</h4>
        <div style="margin-bottom: 10px;">
            <input type="text" id="adminTrackingId" placeholder="Tracking ID" style="width: 100%; margin-bottom: 5px; padding: 5px;">
            <select id="adminStatus" style="width: 100%; margin-bottom: 5px; padding: 5px;">
                <option value="pending">Pending</option>
                <option value="approved">Approved</option>
                <option value="dispatched">Dispatched</option>
                <option value="enroute">En Route</option>
                <option value="arrived">Arrived</option>
                <option value="intransit">In Transit</option>
                <option value="completed">Completed</option>
            </select>
            <button onclick="updateStatusFromAdmin()" style="width: 100%; padding: 5px; margin-bottom: 5px;">Update Status</button>
            <button onclick="assignDemoDriver()" style="width: 100%; padding: 5px; margin-bottom: 5px;">Assign Demo Driver</button>
            <button onclick="toggleAdminPanel()" style="width: 100%; padding: 5px;">Hide Panel</button>
        </div>
    </div>

    <!-- Toggle Admin Panel Button (Remove in Production) -->
    <button onclick="toggleAdminPanel()" style="position: fixed; bottom: 20px; right: 20px; background: #007bff; color: white; border: none; padding: 10px; border-radius: 50%; z-index: 9999;">‚öôÔ∏è</button>

    <script>
        // Admin functions for testing (Remove in Production)
        function toggleAdminPanel() {
            const panel = document.getElementById('adminPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        async function updateStatusFromAdmin() {
            const trackingId = document.getElementById('adminTrackingId').value;
            const status = document.getElementById('adminStatus').value;
            
            if (!trackingId) {
                alert('Please enter a tracking ID');
                return;
            }
            
            if (window.updateServiceStatus) {
                await window.updateServiceStatus(trackingId, status);
                alert(`Status updated to ${status} for ${trackingId}`);
            } else {
                alert('Update function not available');
            }
        }

        async function assignDemoDriver() {
            const trackingId = document.getElementById('adminTrackingId').value;
            
            if (!trackingId) {
                alert('Please enter a tracking ID');
                return;
            }
            
            const demoDriver = {
                id: 'demo_driver_001',
                name: 'Robert Martinez',
                phone: '555-234-5678',
                avatar: 'üë®‚Äçüöó',
                vehicle: {
                    make: 'Ford',
                    model: 'Transit',
                    year: 2023,
                    licensePlate: 'AMT-4567',
                    type: 'wheelchair_accessible'
                }
            };
            
            if (window.assignDriver) {
                await window.assignDriver(trackingId, demoDriver);
                alert(`Demo driver assigned to ${trackingId}`);
            } else {
                alert('Assign function not available');
            }
        }

        // Share tracking function
        function shareTracking() {
            const trackingId = document.getElementById('displayTrackingId')?.textContent;
            if (!trackingId) {
                alert('No active tracking to share');
                return;
            }

            const url = `${window.location.origin}${window.location.pathname}?track=${trackingId}`;
            const text = `Track my medical transportation: ${url}`;

            if (navigator.share) {
                navigator.share({
                    title: 'Alric Transportation - Live Tracking',
                    text: text,
                    url: url,
                });
            } else if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    alert('Tracking link copied to clipboard!');
                });
            } else {
                // Fallback
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('Tracking link copied to clipboard!');
            }
        }

        // Check for tracking ID in URL on page load (only on tracking pages)
        document.addEventListener('DOMContentLoaded', function() {
            // Only run URL tracking check if we're on the tracking page
            if (document.getElementById('trackingInput') && window.location.search.includes('track=')) {
                const urlParams = new URLSearchParams(window.location.search);
                const trackId = urlParams.get('track');
                
                if (trackId) {
                    // Wait for the page to fully load, then auto-track
                    setTimeout(() => {
                        const trackingInput = document.getElementById('trackingInput');
                        if (trackingInput && window.trackService) {
                            trackingInput.value = trackId;
                            window.trackService();
                        }
                    }, 1500);
                }
            }
        });

        // Auto-hide admin panel after 10 seconds
        setTimeout(() => {
            const panel = document.getElementById('adminPanel');
            if (panel) panel.style.display = 'none';
        }, 10000);

        // Add CSS animations for enhanced UI
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0% { opacity: 1; transform: scale(1); }
                50% { opacity: 0.7; transform: scale(1.1); }
                100% { opacity: 1; transform: scale(1); }
            }
            
            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% { transform: translate(-50%, -50%) translateY(0); }
                40% { transform: translate(-50%, -50%) translateY(-10px); }
                60% { transform: translate(-50%, -50%) translateY(-5px); }
            }
            
            @keyframes dash {
                0% { background-position: 0 0; }
                100% { background-position: 20px 0; }
            }
            
            .pulse-dot {
                animation: pulse 2s infinite;
            }
            
            .live-indicator {
                animation: pulse 2s infinite;
            }
            
            .vehicle-icon {
                animation: bounce 2s infinite;
            }
            
            .route-line {
                background: repeating-linear-gradient(
                    to right,
                    #4caf50 0,
                    #4caf50 10px,
                    transparent 10px,
                    transparent 20px
                );
                animation: dash 3s linear infinite;
            }
            
            .action-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            }
            
            .connection-status {
                background: #e8f5e8;
                border: 1px solid #4caf50;
                color: #2e7d32;
            }
            
            .connection-status.disconnected {
                background: #ffebee;
                border: 1px solid #f44336;
                color: #c62828;
            }
            
            .timeline-item.active .timeline-content h4::after {
                content: " üîÑ";
                animation: spin 1s linear infinite;
            }
            
            @keyframes spin {
                from { transform: rotate(0deg); }
                to { transform: rotate(360deg); }
            }
            
            .timeline-item.completed .timeline-content h4 {
                color: #4caf50;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
